<% if @max_pages > 1 %>
<ul class="page_index">
  <li class="prefix">Page:</li>
  <% if @letter %>
    <% page_prefix = "/#{@adapter.router.docs_prefix}/~#{@letter}/" %>
  <% else %>
    <% page_prefix = "/find/#{@adapter.router.docs_prefix}?q=#{@search}&page=" %>
  <% end %>

  <% ((@page - 10)...(@page + 10)).each do |page| %>
    <% if page == @page - 10 && page > 1 %>
      <li><a href="<%= page_prefix %>1">1</a></li> ...
    <% end %>
    <% next if page < 1 || page >= @max_pages %>
    <% if page == @page %>
      <li class="selected"><%= page %></li>
    <% else %>
      <li><a href="<%= page_prefix %><%= page %>"><%= page %></a></li>
    <% end %>
    <% if page == @page + 9 && page < @max_pages %>
      ... <li><a href="<%= page_prefix %><%= @max_pages - 1 %>"><%= @max_pages - 1 %></a></li>
    <% end %>
  <% end %>
</ul>
<% end %>
